<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Ordem de Servi√ßo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        h2 {
            color: #555;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        textarea {
            height: 100px;
            resize: vertical;
        }

        .btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .btn-success {
            background-color: #28a745;
        }

        .btn-success:hover {
            background-color: #1e7e34;
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        .btn-group {
            text-align: center;
            margin-top: 20px;
        }

        .table-container {
            margin-top: 30px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .status-pendente {
            background-color: #fff3cd;
            color: #856404;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .status-andamento {
            background-color: #cce7ff;
            color: #004085;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .status-concluido {
            background-color: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-box {
            width: 300px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìã Sistema de Ordem de Servi√ßo</h1>

        <!-- Formul√°rio de Ordem de Servi√ßo -->
        <div class="form-section">
            <h2>Nova Ordem de Servi√ßo</h2>
            <form id="osForm">
                <div class="form-group">
                    <label for="cliente">Cliente:</label>
                    <input type="text" id="cliente" name="cliente" required>
                </div>

                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="tel" id="telefone" name="telefone" required>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email">
                </div>

                <div class="form-group">
                    <label for="equipamento">Equipamento:</label>
                    <input type="text" id="equipamento" name="equipamento" required>
                </div>

                <div class="form-group">
                    <label for="marca">Marca/Modelo:</label>
                    <input type="text" id="marca" name="marca" required>
                </div>

                <div class="form-group">
                    <label for="numero_serie">N√∫mero de S√©rie:</label>
                    <input type="text" id="numero_serie" name="numero_serie">
                </div>

                <div class="form-group">
                    <label for="defeito">Defeito Relatado:</label>
                    <textarea id="defeito" name="defeito" required></textarea>
                </div>

                <div class="form-group">
                    <label for="observacoes">Observa√ß√µes:</label>
                    <textarea id="observacoes" name="observacoes"></textarea>
                </div>

                <div class="form-group">
                    <label for="tecnico">T√©cnico Respons√°vel:</label>
                    <select id="tecnico" name="tecnico" required>
                        <option value="">Selecione o t√©cnico</option>
                        <option value="tecnico1">T√©cnico 1</option>
                        <option value="tecnico2">T√©cnico 2</option>
                        <option value="tecnico3">T√©cnico 3</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="prioridade">Prioridade:</label>
                    <select id="prioridade" name="prioridade" required>
                        <option value="baixa">Baixa</option>
                        <option value="media">M√©dia</option>
                        <option value="alta">Alta</option>
                        <option value="urgente">Urgente</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-success">Salvar OS</button>
                    <button type="button" class="btn" onclick="limparFormulario()">Limpar</button>
                </div>
            </form>
        </div>

        <!-- Busca e Lista de Ordens de Servi√ßo -->
        <div class="form-section">
            <h2>Ordens de Servi√ßo</h2>
            
            <div class="search-container">
                <input type="text" id="search" class="search-box" placeholder="Buscar por cliente, equipamento...">
                <button class="btn" onclick="filtrarOS()">Buscar</button>
                <button class="btn" onclick="limparBusca()">Limpar</button>
            </div>

            <div class="table-container">
                <table id="tabelaOS">
                    <thead>
                        <tr>
                            <th>N¬∫ OS</th>
                            <th>Cliente</th>
                            <th>Equipamento</th>
                            <th>Data Abertura</th>
                            <th>Status</th>
                            <th>T√©cnico</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="corpoTabela">
                        <!-- As ordens de servi√ßo ser√£o inseridas aqui via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Array para armazenar as ordens de servi√ßo
        let ordensServico = JSON.parse(localStorage.getItem('ordensServico')) || [];
        let contadorOS = parseInt(localStorage.getItem('contadorOS')) || 1;

        // Fun√ß√£o para salvar ordem de servi√ßo
        document.getElementById('osForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const os = {
                id: contadorOS++,
                cliente: formData.get('cliente'),
                telefone: formData.get('telefone'),
                email: formData.get('email'),
                equipamento: formData.get('equipamento'),
                marca: formData.get('marca'),
                numero_serie: formData.get('numero_serie'),
                defeito: formData.get('defeito'),
                observacoes: formData.get('observacoes'),
                tecnico: formData.get('tecnico'),
                prioridade: formData.get('prioridade'),
                status: 'pendente',
                data_abertura: new Date().toLocaleDateString('pt-BR'),
                data_conclusao: null
            };

            ordensServico.push(os);
            salvarDados();
            atualizarTabela();
            limparFormulario();
            alert('Ordem de Servi√ßo salva com sucesso!');
        });

        // Fun√ß√£o para salvar dados no localStorage
        function salvarDados() {
            localStorage.setItem('ordensServico', JSON.stringify(ordensServico));
            localStorage.setItem('contadorOS', contadorOS.toString());
        }

        // Fun√ß√£o para atualizar a tabela
        function atualizarTabela() {
            const corpoTabela = document.getElementById('corpoTabela');
            corpoTabela.innerHTML = '';

            ordensServico.forEach(os => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                let statusText = '';
                
                switch(os.status) {
                    case 'pendente':
                        statusClass = 'status-pendente';
                        statusText = 'Pendente';
                        break;
                    case 'andamento':
                        statusClass = 'status-andamento';
                        statusText = 'Em Andamento';
                        break;
                    case 'concluido':
                        statusClass = 'status-concluido';
                        statusText = 'Conclu√≠do';
                        break;
                }

                row.innerHTML = `
                    <td>#${os.id}</td>
                    <td>${os.cliente}</td>
                    <td>${os.equipamento}</td>
                    <td>${os.data_abertura}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td>${os.tecnico}</td>
                    <td>
                        <button class="btn" onclick="editarOS(${os.id})">Editar</button>
                        <button class="btn btn-danger" onclick="excluirOS(${os.id})">Excluir</button>
                    </td>
                `;
                
                corpoTabela.appendChild(row);
            });
        }

        // Fun√ß√£o para limpar formul√°rio
        function limparFormulario() {
            document.getElementById('osForm').reset();
        }

        // Fun√ß√£o para excluir ordem de servi√ßo
        function excluirOS(id) {
            if (confirm('Tem certeza que deseja excluir esta ordem de servi√ßo?')) {
                ordensServico = ordensServico.filter(os => os.id !== id);
                salvarDados();
                atualizarTabela();
            }
        }

        // Fun√ß√£o para editar ordem de servi√ßo (simplificada)
        function editarOS(id) {
            const os = ordensServico.find(os => os.id === id);
            if (os) {
                // Preencher formul√°rio com dados da OS
                document.getElementById('cliente').value = os.cliente;
                document.getElementById('telefone').value = os.telefone;
                document.getElementById('email').value = os.email;
                document.getElementById('equipamento').value = os.equipamento;
                document.getElementById('marca').value = os.marca;
                document.getElementById('numero_serie').value = os.numero_serie;
                document.getElementById('defeito').value = os.defeito;
                document.getElementById('observacoes').value = os.observacoes;
                document.getElementById('tecnico').value = os.tecnico;
                document.getElementById('prioridade').value = os.prioridade;

                // Remover a OS original
                ordensServico = ordensServico.filter(item => item.id !== id);
                salvarDados();
                atualizarTabela();
            }
        }

        // Fun√ß√£o para filtrar ordens de servi√ßo
        function filtrarOS() {
            const termo = document.getElementById('search').value.toLowerCase();
            const corpoTabela = document.getElementById('corpoTabela');
            corpoTabela.innerHTML = '';

            const ordensFiltradas = ordensServico.filter(os => 
                os.cliente.toLowerCase().includes(termo) ||
                os.equipamento.toLowerCase().includes(termo) ||
                os.marca.toLowerCase().includes(termo)
            );

            ordensFiltradas.forEach(os => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                let statusText = '';
                
                switch(os.status) {
                    case 'pendente':
                        statusClass = 'status-pendente';
                        statusText = 'Pendente';
                        break;
                    case 'andamento':
                        statusClass = 'status-andamento';
                        statusText = 'Em Andamento';
                        break;
                    case 'concluido':
                        statusClass = 'status-concluido';
                        statusText = 'Conclu√≠do';
                        break;
                }

                row.innerHTML = `
                    <td>#${os.id}</td>
                    <td>${os.cliente}</td>
                    <td>${os.equipamento}</td>
                    <td>${os.data_abertura}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td>${os.tecnico}</td>
                    <td>
                        <button class="btn" onclick="editarOS(${os.id})">Editar</button>
                        <button class="btn btn-danger" onclick="excluirOS(${os.id})">Excluir</button>
                    </td>
                `;
                
                corpoTabela.appendChild(row);
            });
        }

        // Fun√ß√£o para limpar busca
        function limparBusca() {
            document.getElementById('search').value = '';
            atualizarTabela();
        }

        // Inicializar tabela ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', atualizarTabela);
    </script>
</body>
</html>